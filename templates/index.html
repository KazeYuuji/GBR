<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camera Price Predictor - GBR</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            background-color: #f8f9fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .header {
            background-color: #343a40;
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
        }
        .form-container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        .result-container {
            display: none;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        .footer {
            background-color: #343a40;
            color: white;
            padding: 1.5rem 0;
            margin-top: 2rem;
        }
        .price-display {
            font-size: 2.5rem;
            font-weight: bold;
            color: #28a745;
        }
        .confidence-interval {
            font-size: 1.2rem;
            color: #6c757d;
        }
        .brand-tag {
            display: inline-block;
            background-color: #007bff;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            margin-top: 0.5rem;
        }
        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
        }
        .spinner-border {
            width: 3rem;
            height: 3rem;
        }
        .feature-badge {
            background-color: #e9ecef;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.875rem;
            margin: 0.25rem;
        }
        .model-info {
            background-color: #343a40;
            color: white;
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1.5rem;
        }
    </style>
</head>
<body>
    <div class="header text-center">
        <div class="container">
            <h1><i class="fas fa-camera"></i> Camera Price Predictor</h1>
            <p class="lead">Using Gradient Boosting Regression (GBR)</p>
        </div>
    </div>

    <div class="container">
        <!-- Model Info -->
        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="model-info">
                    <div class="row text-center">
                        <div class="col-md-4">
                            <i class="fas fa-database fa-2x"></i>
                            <p class="mb-0 mt-2">979 Cameras</p>
                        </div>
                        <div class="col-md-4">
                            <i class="fas fa-check-circle fa-2x"></i>
                            <p class="mb-0 mt-2">R² = 0.84</p>
                        </div>
                        <div class="col-md-4">
                            <i class="fas fa-tags fa-2x"></i>
                            <p class="mb-0 mt-2">21 Brands</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-8 mx-auto">
                <div class="form-container">
                    <h4 class="mb-4"><i class="fas fa-sliders-h"></i> Enter Camera Specifications</h4>
                    <form id="predictionForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="brand" class="form-label">Brand</label>
                                <select class="form-select" id="brand" name="Brand" required>
                                    <option value="">Select Brand</option>
                                    <option value="Canon">Canon</option>
                                    <option value="Sony">Sony</option>
                                    <option value="Nikon">Nikon</option>
                                    <option value="Fujifilm">Fujifilm</option>
                                    <option value="Olympus">Olympus</option>
                                    <option value="Panasonic">Panasonic</option>
                                    <option value="Samsung">Samsung</option>
                                    <option value="Pentax">Pentax</option>
                                    <option value="Casio">Casio</option>
                                    <option value="Kodak">Kodak</option>
                                    <option value="Agfa">Agfa</option>
                                    <option value="Toshiba">Toshiba</option>
                                    <option value="Ricoh">Ricoh</option>
                                    <option value="Minolta">Minolta</option>
                                    <option value="Leica">Leica</option>
                                    <option value="Epson">Epson</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="effective_pixels" class="form-label">Effective Pixels (MP)</label>
                                <input type="number" class="form-control" id="effective_pixels" name="Effective pixels" required min="0" step="0.1" placeholder="e.g., 12">
                                <div class="form-text">Megapixels (e.g., 12 = 12 MP)</div>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="weight" class="form-label">Weight (g)</label>
                                <input type="number" class="form-control" id="weight" name="Weight" required min="0" step="0.1" placeholder="e.g., 500">
                            </div>
                            <div class="col-md-6">
                                <label for="dimensions" class="form-label">Dimension Volume (mm³)</label>
                                <input type="number" class="form-control" id="dimensions" name="Dimensions" required min="0" step="0.1" placeholder="e.g., 707280">
                                <div class="form-text">Width × Height × Depth</div>
                            </div>
                        </div>

                        <!-- Alternative: Individual dimensions -->
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label for="width" class="form-label">Width (mm)</label>
                                <input type="number" class="form-control" id="width" min="0" step="0.1" placeholder="e.g., 127">
                            </div>
                            <div class="col-md-4">
                                <label for="height" class="form-label">Height (mm)</label>
                                <input type="number" class="form-control" id="height" min="0" step="0.1" placeholder="e.g., 94">
                            </div>
                            <div class="col-md-4">
                                <label for="depth" class="form-label">Depth (mm)</label>
                                <input type="number" class="form-control" id="depth" min="0" step="0.1" placeholder="e.g., 60">
                            </div>
                        </div>
                        
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-calculator"></i> Predict Price
                            </button>
                        </div>
                    </form>
                </div>
                
                <div class="loading" id="loadingIndicator">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <p class="mt-3">Calculating price prediction...</p>
                </div>
                
                <div class="result-container" id="resultContainer">
                    <h2 class="text-center mb-4"><i class="fas fa-tag"></i> Prediction Result</h2>
                    <div class="text-center mb-4">
                        <div class="price-display" id="predictedPrice">$0</div>
                        <div class="confidence-interval" id="confidenceInterval">95% Confidence Interval: Not available</div>
                        <div class="brand-tag" id="brandTag">Brand</div>
                    </div>
                    
                    <div class="card mb-3">
                        <div class="card-body">
                            <h5 class="card-title"><i class="fas fa-info-circle"></i> Input Details</h5>
                            <div class="row">
                                <div class="col-md-6">
                                    <p class="mb-1"><strong>Brand:</strong> <span id="resultBrand"></span></p>
                                    <p class="mb-1"><strong>Effective Pixels:</strong> <span id="resultPixels"></span> MP</p>
                                </div>
                                <div class="col-md-6">
                                    <p class="mb-1"><strong>Weight:</strong> <span id="resultWeight"></span> g</p>
                                    <p class="mb-1"><strong>Dimension Volume:</strong> <span id="resultVolume"></span> mm³</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <h5><i class="fas fa-info-circle"></i> About This Prediction</h5>
                        <p>This price prediction is based on a Gradient Boosting Regression model trained on camera specifications. The model considers factors such as brand, resolution, weight, and dimensions to determine the price.</p>
                    </div>
                    
                    <div class="d-grid">
                        <button type="button" class="btn btn-outline-primary" id="newPredictionBtn">
                            <i class="fas fa-redo"></i> Make Another Prediction
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Feature Cards -->
        <div class="row mt-4">
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body text-center">
                        <i class="fas fa-chart-line fa-3x text-primary mb-3"></i>
                        <h5 class="card-title">Accurate Predictions</h5>
                        <p class="card-text">Our model achieves R² = 0.84 on test data, providing reliable price estimates.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body text-center">
                        <i class="fas fa-cogs fa-3x text-success mb-3"></i>
                        <h5 class="card-title">Advanced Features</h5>
                        <p class="card-text">The model analyzes brand, resolution, weight, and dimensions to determine price factors.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-body text-center">
                        <i class="fas fa-shield-alt fa-3x text-warning mb-3"></i>
                        <h5 class="card-title">Confidence Intervals</h5>
                        <p class="card-text">Each prediction includes a confidence interval to indicate prediction reliability.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer text-center">
        <div class="container">
            <p>&copy; 2023 Camera Price Predictor | Powered by Machine Learning</p>
            <p><a href="/about" class="text-white">About the Model</a></p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Auto-calculate dimension volume from W x H x D
        document.getElementById('width').addEventListener('input', calculateVolume);
        document.getElementById('height').addEventListener('input', calculateVolume);
        document.getElementById('depth').addEventListener('input', calculateVolume);
        
        function calculateVolume() {
            const width = parseFloat(document.getElementById('width').value) || 0;
            const height = parseFloat(document.getElementById('height').value) || 0;
            const depth = parseFloat(document.getElementById('depth').value) || 0;
            
            if (width > 0 && height > 0 && depth > 0) {
                const volume = width * height * depth;
                document.getElementById('dimensions').value = volume;
            }
        }
        
        document.getElementById('predictionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Show loading indicator
            document.getElementById('loadingIndicator').style.display = 'block';
            document.getElementById('resultContainer').style.display = 'none';
            
            // Get form data
            const formData = new FormData(this);
            
            // Send prediction request
            fetch('/predict', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(Object.fromEntries(formData))
            })
            .then(response => response.json())
            .then(data => {
                // Hide loading indicator
                document.getElementById('loadingIndicator').style.display = 'none';
                
                if (data.price) {
                    // Display results
                    document.getElementById('predictedPrice').textContent = `$${data.price}`;
                    document.getElementById('brandTag').textContent = data.brand;
                    
                    // Input details
                    document.getElementById('resultBrand').textContent = data.brand;
                    document.getElementById('resultPixels').textContent = data.effective_pixels;
                    document.getElementById('resultWeight').textContent = data.weight;
                    document.getElementById('resultVolume').textContent = data.dimension_volume.toLocaleString();
                    
                    // Show result container
                    document.getElementById('resultContainer').style.display = 'block';
                    
                    // Scroll to results
                    document.getElementById('resultContainer').scrollIntoView({ behavior: 'smooth' });
                } else {
                    // Show error
                    alert('Error: ' + (data.error || 'Unknown error occurred'));
                }
            })
            .catch(error => {
                // Hide loading indicator
                document.getElementById('loadingIndicator').style.display = 'none';
                alert('Error: ' + error);
            });
        });
        
        document.getElementById('newPredictionBtn').addEventListener('click', function() {
            // Reset form
            document.getElementById('predictionForm').reset();
            document.getElementById('dimensions').value = '';
            
            // Hide results
            document.getElementById('resultContainer').style.display = 'none';
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    </script>
</body>
</html>

